<!DOCTYPE html>
<html>
<head>
<title></title>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">

<style>
body {
	background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)),
		url('https://images.pexels.com/photos/1028725/pexels-photo-1028725.jpeg');
	background-repeat: no-repeat;
	background-position: center;
	background-size: cover;
	width: 100%;
	height: 100vh;
	position: relative;
}

header {
	width: 100%;
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
}

form {
  	text-align: center;
}
</style>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"
	integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
	crossorigin="anonymous"></script>
<script>
	function checkloveper() {

		var fname = $("#fname").val();
		var sname = $("#sname").val();

		if (fname == "") {
			alert('Please enter your name');
		} else if (fname.length <= 2) {
			alert('Min lenght is 3')
		} else if (!isNaN(fname)) {
			alert('Numbers are not allowed');
		}
		else if (sname == "") {
			alert('Please enter your love name');
		} else if (sname.length <= 2) {
			alert('Min lenght is 3')
		} else if (!isNaN(sname)) {
			alert('Numbers are not allowed');
		} else {
			$.ajax({
				type : "GET",
				dataType:"json",
				url : "http://localhost:8081/love-calculator?fname="+fname+"&sname="+sname,
				success : function(result) {
					//{fname: "Donghu", sname: "Sangmi", percentage: "34", result: "Can choose someone better.", image: "https://yesno.wtf/assets/maybe/3-3b062a434fc4a0c283dec220a6a16a9d.gif"}
					
					$("#checkloveper").attr("disabled", false);
					
					if(result.status == "success") {
						$("#lovevalue").css("color","red");
						$("#lovevalue").val(result.percentage + "%");
						
						$("#yes_or_no_img_div").empty();
						$("#yes_or_no_img_div").append("<img src="+result.image+">");
					} else if(result.status === "error" && result.code === "502") {
						$("#lovevalue").css("color","red");
						$("#lovevalue").val("Please try again..");
						$("#yes_or_no_img_div").text("God Bless Your RelationShip");
					}  else {
						$("#lovevalue").css("color","red");
						$("#lovevalue").val(result.message);
						$("#yes_or_no_img_div").text("God Bless Your RelationShip");
					}
					//$("#lovevalue").html(result);
				},beforeSend: function() {      // ajax 요청하기전에 실행되는 함수
					$("#checkloveper").attr("disabled", true);
					$("#yes_or_no_img_div").text("Image loading...");
				}
			});
		}
	}
	
	$(document).ready(function() {
		$("#checkloveper").click(function() {
			
			checkloveper();
			
		});
	});
	
	
</script>
</head>
<body>

	<header>

		<div class="card w-50 m-auto text-center ">
			<div class="card-header bg-danger text-white">LOVE CALCULATOR</div>
			<div class="card-body">
				<form class="form-inline m-auto" style="width:70%">
					<div class="form-group text-center">
						<input type="text" name="" class="form-control text-center"
							placeholder="Your Name" id="fname">
					</div>
					<div class="pl-4 pr-4">
						<span> + </span>
					</div>
					<div class="form-group">
						<input type="text" name="" class="form-control text-center"
							placeholder=" Love Name" id="sname">
					</div>
				</form>
				<br>
				<div class="w-70 m-auto">
					<button id="checkloveper" class="btn btn-success w-50">
						click</button>
				</div>
				<br>
				<div>
					<input type="text" name="" placeholder="LOVE PERCENTAGE"
						class="form-control text-center w-25 m-auto" id="lovevalue">
				</div>
			</div>
			<div id="yes_or_no_img_div" class="card-footer">
				God Bless Your RelationShip
			</div>
		</div>

	</header>
</body>

</html>